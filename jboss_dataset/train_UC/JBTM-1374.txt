JDBC Object Store Deadlock potential with MySQL
org.jboss.jbossts.qa.junit.testgroup.TestGroup_txcore_lockrecord test failed on jbossts-branch417-EAP61-java6-jdbcobjectstore


See: http://172.17.131.2/job/jbossts-branch417-EAP61-java6-jdbcobjectstore/20/

Failed tests:
org.jboss.jbossts.qa.junit.testgroup.TestGroup_txcore_lockrecord

performing command: /usr/local/jdk1.6.0_37/bin/java -classpath dist/narayana-full-4.17.4.Final-SNAPSHOT/etc/:dist/narayana-full-4.17.4.Final-SNAPSHOT/lib/*:dist/narayana-full-4.17.4.Final-SNAPSHOT/lib/ext/*:dist/narayana-full-4.17.4.Final-SNAPSHOT/jacorb/lib/*:dist/narayana-full-4.17.4.Final-SNAPSHOT/jacorb/etc/:ext/fscontext.jar:ext/providerutil.jar:ext/jboss-profiler-jvmti.jar:ext/jboss-logging-spi.jar:tests/build/classes/:dbdrivers/selected_dbdriver/*:dbdrivers/DB2_v9.7/db2jcc.jar:dbdrivers/jConnect-6_0/classes/jconn3.jar:dbdrivers/mssql2005_sqljdbc_2.0/enu/sqljdbc4.jar:dbdrivers/mysql-connector-java-5.1.8-bin.jar:dbdrivers/oracle_10_2_0_4/ojdbc14.jar:dbdrivers/postgresql-8.3-605.jdbc4.jar:../build/extlib/emma.jar:../build/extlib/netty.jar -Dqa.debug=true -Djava.naming.provider.url=file:///tmp -Djava.naming.factory.initial=com.sun.jndi.fscontext.RefFSContextFactory -Dperformanceprofilestore.dir=config/perf_profiles/ -Djdbcprofilestore.dir=config/jdbc_profiles -Dmemorytestprofilestore.dir=config/memory_profiles/ -Dots.server.bindname=value_1 -DCoordinatorEnvironmentBean.maintainHeuristics=NO -DRecoveryEnvironmentBean.recoveryBackoffPeriod=5 -DCoreEnvironmentBean.timeoutFactor=2 -DCoordinatorEnvironmentBean.defaultTimeout=240 -Demma.coverage.out.file=./testoutput/txcore_lockrecord/LockRecord_Thread_Test036a/emptyObjectStore-coverage.ec -DportOffsetId=0 -DObjectStoreBaseDir=/home/hudson/workspace/jbossts-branch417-EAP61-java6-jdbcobjectstore/qa/testoutput/txcore_lockrecord/LockRecord_Thread_Test036a/emptyObjectStore -DRecoveryEnvironmentBean.recoveryListener=true -DObjectStoreEnvironmentBean.objectStoreType=com.arjuna.ats.internal.arjuna.objectstore.jdbc.JDBCStore -DObjectStoreEnvironmentBean.jdbcAccess=com.arjuna.ats.internal.arjuna.objectstore.jdbc.accessors.DynamicDataSourceJDBCAccess;ClassName=com.mysql.jdbc.jdbc2.optional.MysqlDataSource;DatabaseName=jbossts;ServerName=tywin.buildnet.ncl.jboss.com;PortNumber=3306;User=dtf11;Password=dtf11 -DObjectStoreEnvironmentBean.tablePrefix=Action -DObjectStoreEnvironmentBean.stateStore.objectStoreType=com.arjuna.ats.internal.arjuna.objectstore.jdbc.JDBCStore -DObjectStoreEnvironmentBean.stateStore.jdbcAccess=com.arjuna.ats.internal.arjuna.objectstore.jdbc.accessors.DynamicDataSourceJDBCAccess;ClassName=com.mysql.jdbc.jdbc2.optional.MysqlDataSource;DatabaseName=jbossts;ServerName=tywin.buildnet.ncl.jboss.com;PortNumber=3306;User=dtf11;Password=dtf11 -DObjectStoreEnvironmentBean.stateStore.tablePrefix=stateStore -DObjectStoreEnvironmentBean.communicationStore.objectStoreType=com.arjuna.ats.internal.arjuna.objectstore.jdbc.JDBCStore -DObjectStoreEnvironmentBean.communicationStore.jdbcAccess=com.arjuna.ats.internal.arjuna.objectstore.jdbc.accessors.DynamicDataSourceJDBCAccess;ClassName=com.mysql.jdbc.jdbc2.optional.MysqlDataSource;DatabaseName=jbossts;ServerName=tywin.buildnet.ncl.jboss.com;PortNumber=3306;User=dtf11;Password=dtf11 -DObjectStoreEnvironmentBean.communicationStore.tablePrefix=Communication org.jboss.jbossts.qa.Utils.EmptyObjectStore 
starting command: /usr/local/jdk1.6.0_37/bin/java -classpath dist/narayana-full-4.17.4.Final-SNAPSHOT/etc/:dist/narayana-full-4.17.4.Final-SNAPSHOT/lib/*:dist/narayana-full-4.17.4.Final-SNAPSHOT/lib/ext/*:dist/narayana-full-4.17.4.Final-SNAPSHOT/jacorb/lib/*:dist/narayana-full-4.17.4.Final-SNAPSHOT/jacorb/etc/:ext/fscontext.jar:ext/providerutil.jar:ext/jboss-profiler-jvmti.jar:ext/jboss-logging-spi.jar:tests/build/classes/:dbdrivers/selected_dbdriver/*:dbdrivers/DB2_v9.7/db2jcc.jar:dbdrivers/jConnect-6_0/classes/jconn3.jar:dbdrivers/mssql2005_sqljdbc_2.0/enu/sqljdbc4.jar:dbdrivers/mysql-connector-java-5.1.8-bin.jar:dbdrivers/oracle_10_2_0_4/ojdbc14.jar:dbdrivers/postgresql-8.3-605.jdbc4.jar:../build/extlib/emma.jar:../build/extlib/netty.jar -Dqa.debug=true -Djava.naming.provider.url=file:///tmp -Djava.naming.factory.initial=com.sun.jndi.fscontext.RefFSContextFactory -Dperformanceprofilestore.dir=config/perf_profiles/ -Djdbcprofilestore.dir=config/jdbc_profiles -Dmemorytestprofilestore.dir=config/memory_profiles/ -Dots.server.bindname=value_1 -DCoordinatorEnvironmentBean.maintainHeuristics=NO -DRecoveryEnvironmentBean.recoveryBackoffPeriod=5 -DCoreEnvironmentBean.timeoutFactor=2 -DCoordinatorEnvironmentBean.defaultTimeout=240 -Demma.coverage.out.file=./testoutput/txcore_lockrecord/LockRecord_Thread_Test036a/client_0-coverage.ec -DportOffsetId=1 -DObjectStoreBaseDir=/home/hudson/workspace/jbossts-branch417-EAP61-java6-jdbcobjectstore/qa/testoutput/txcore_lockrecord/LockRecord_Thread_Test036a/client_0 -DRecoveryEnvironmentBean.recoveryListener=true -DObjectStoreEnvironmentBean.objectStoreType=com.arjuna.ats.internal.arjuna.objectstore.jdbc.JDBCStore -DObjectStoreEnvironmentBean.jdbcAccess=com.arjuna.ats.internal.arjuna.objectstore.jdbc.accessors.DynamicDataSourceJDBCAccess;ClassName=com.mysql.jdbc.jdbc2.optional.MysqlDataSource;DatabaseName=jbossts;ServerName=tywin.buildnet.ncl.jboss.com;PortNumber=3306;User=dtf11;Password=dtf11 -DObjectStoreEnvironmentBean.tablePrefix=Action -DObjectStoreEnvironmentBean.stateStore.objectStoreType=com.arjuna.ats.internal.arjuna.objectstore.jdbc.JDBCStore -DObjectStoreEnvironmentBean.stateStore.jdbcAccess=com.arjuna.ats.internal.arjuna.objectstore.jdbc.accessors.DynamicDataSourceJDBCAccess;ClassName=com.mysql.jdbc.jdbc2.optional.MysqlDataSource;DatabaseName=jbossts;ServerName=tywin.buildnet.ncl.jboss.com;PortNumber=3306;User=dtf11;Password=dtf11 -DObjectStoreEnvironmentBean.stateStore.tablePrefix=stateStore -DObjectStoreEnvironmentBean.communicationStore.objectStoreType=com.arjuna.ats.internal.arjuna.objectstore.jdbc.JDBCStore -DObjectStoreEnvironmentBean.communicationStore.jdbcAccess=com.arjuna.ats.internal.arjuna.objectstore.jdbc.accessors.DynamicDataSourceJDBCAccess;ClassName=com.mysql.jdbc.jdbc2.optional.MysqlDataSource;DatabaseName=jbossts;ServerName=tywin.buildnet.ncl.jboss.com;PortNumber=3306;User=dtf11;Password=dtf11 -DObjectStoreEnvironmentBean.communicationStore.tablePrefix=Communication org.jboss.jbossts.qa.ArjunaCore.LockManager.client.WorkerClient003 10 10 10 
performing command: /usr/local/jdk1.6.0_37/bin/java -classpath dist/narayana-full-4.17.4.Final-SNAPSHOT/etc/:dist/narayana-full-4.17.4.Final-SNAPSHOT/lib/*:dist/narayana-full-4.17.4.Final-SNAPSHOT/lib/ext/*:dist/narayana-full-4.17.4.Final-SNAPSHOT/jacorb/lib/*:dist/narayana-full-4.17.4.Final-SNAPSHOT/jacorb/etc/:ext/fscontext.jar:ext/providerutil.jar:ext/jboss-profiler-jvmti.jar:ext/jboss-logging-spi.jar:tests/build/classes/:dbdrivers/selected_dbdriver/*:dbdrivers/DB2_v9.7/db2jcc.jar:dbdrivers/jConnect-6_0/classes/jconn3.jar:dbdrivers/mssql2005_sqljdbc_2.0/enu/sqljdbc4.jar:dbdrivers/mysql-connector-java-5.1.8-bin.jar:dbdrivers/oracle_10_2_0_4/ojdbc14.jar:dbdrivers/postgresql-8.3-605.jdbc4.jar:../build/extlib/emma.jar:../build/extlib/netty.jar -Dqa.debug=true -Djava.naming.provider.url=file:///tmp -Djava.naming.factory.initial=com.sun.jndi.fscontext.RefFSContextFactory -Dperformanceprofilestore.dir=config/perf_profiles/ -Djdbcprofilestore.dir=config/jdbc_profiles -Dmemorytestprofilestore.dir=config/memory_profiles/ -Dots.server.bindname=value_1 -DCoordinatorEnvironmentBean.maintainHeuristics=NO -DRecoveryEnvironmentBean.recoveryBackoffPeriod=5 -DCoreEnvironmentBean.timeoutFactor=2 -DCoordinatorEnvironmentBean.defaultTimeout=240 -Demma.coverage.out.file=./testoutput/txcore_lockrecord/LockRecord_Thread_Test036a/emptyObjectStore-coverage.ec -DportOffsetId=2 -DObjectStoreBaseDir=/home/hudson/workspace/jbossts-branch417-EAP61-java6-jdbcobjectstore/qa/testoutput/txcore_lockrecord/LockRecord_Thread_Test036a/emptyObjectStore -DRecoveryEnvironmentBean.recoveryListener=true -DObjectStoreEnvironmentBean.objectStoreType=com.arjuna.ats.internal.arjuna.objectstore.jdbc.JDBCStore -DObjectStoreEnvironmentBean.jdbcAccess=com.arjuna.ats.internal.arjuna.objectstore.jdbc.accessors.DynamicDataSourceJDBCAccess;ClassName=com.mysql.jdbc.jdbc2.optional.MysqlDataSource;DatabaseName=jbossts;ServerName=tywin.buildnet.ncl.jboss.com;PortNumber=3306;User=dtf11;Password=dtf11 -DObjectStoreEnvironmentBean.tablePrefix=Action -DObjectStoreEnvironmentBean.stateStore.objectStoreType=com.arjuna.ats.internal.arjuna.objectstore.jdbc.JDBCStore -DObjectStoreEnvironmentBean.stateStore.jdbcAccess=com.arjuna.ats.internal.arjuna.objectstore.jdbc.accessors.DynamicDataSourceJDBCAccess;ClassName=com.mysql.jdbc.jdbc2.optional.MysqlDataSource;DatabaseName=jbossts;ServerName=tywin.buildnet.ncl.jboss.com;PortNumber=3306;User=dtf11;Password=dtf11 -DObjectStoreEnvironmentBean.stateStore.tablePrefix=stateStore -DObjectStoreEnvironmentBean.communicationStore.objectStoreType=com.arjuna.ats.internal.arjuna.objectstore.jdbc.JDBCStore -DObjectStoreEnvironmentBean.communicationStore.jdbcAccess=com.arjuna.ats.internal.arjuna.objectstore.jdbc.accessors.DynamicDataSourceJDBCAccess;ClassName=com.mysql.jdbc.jdbc2.optional.MysqlDataSource;DatabaseName=jbossts;ServerName=tywin.buildnet.ncl.jboss.com;PortNumber=3306;User=dtf11;Password=dtf11 -DObjectStoreEnvironmentBean.communicationStore.tablePrefix=Communication org.jboss.jbossts.qa.Utils.EmptyObjectStore 


Testcase: LockRecord_Thread_Test036a took 22.69 sec
	FAILED
task client_0 printed Failed.
junit.framework.AssertionFailedError: task client_0 printed Failed.
	at org.jboss.jbossts.qa.junit.TaskImpl$TaskReaderThread.checkPassFail(TaskImpl.java:671)
	at org.jboss.jbossts.qa.junit.TaskImpl.waitFor(TaskImpl.java:430)
	at org.jboss.jbossts.qa.junit.TestGroupBase.startAndWaitForClient(TestGroupBase.java:127)
	at org.jboss.jbossts.qa.junit.testgroup.TestGroup_txcore_lockrecord.LockRecord_Thread_Test036a(TestGroup_txcore_lockrecord.java:467)
	at org.jboss.jbossts.qa.junit.QATestNameRule$1.evaluate(QATestNameRule.java:89)